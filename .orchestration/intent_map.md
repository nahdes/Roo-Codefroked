# Intent Map

> **Auto-generated by the Hook System (IntentMapUpdater post-hook). Do not edit manually.**
> Last regenerated: `2026-02-19T10:25:00Z`
> Total intents tracked: 4 | Total file mutations logged: 14

---

## Summary Table

| Intent ID                                          | Intent Name                   | Status         | Files Touched | Mutations | Last Active          |
| -------------------------------------------------- | ----------------------------- | -------------- | ------------- | --------- | -------------------- |
| [INT-001](#int-001--build-weather-api-endpoint)    | Build Weather API Endpoint    | ðŸŸ¡ IN_PROGRESS | 6             | 8         | 2026-02-19 09:45 UTC |
| [INT-002](#int-002--jwt-authentication-middleware) | JWT Authentication Middleware | âšª PENDING     | 0             | 0         | â€”                    |
| [INT-003](#int-003--hook-system--core-engine)      | Hook System â€” Core Engine     | ðŸŸ¡ IN_PROGRESS | 6             | 6         | 2026-02-19 10:25 UTC |
| [INT-004](#int-004--database-layer--user-model)    | Database Layer â€” User Model   | ðŸ”´ BLOCKED     | 0             | 0         | â€”                    |

---

## INT-001 â€” Build Weather API Endpoint

**Status:** ðŸŸ¡ `IN_PROGRESS`
**Owned Scope:** `src/weather/**`, `src/api/weather.ts`, `src/types/weather.ts`, `src/routes/weather.ts`, `tests/weather/**`
**Contributors:** `claude-sonnet-4-6` (session `sess-abc-001`)

### Files Modified

| File                                    | Mutations | Last Hash                | Last Class         | Last Modified        |
| --------------------------------------- | --------- | ------------------------ | ------------------ | -------------------- |
| `src/weather/parser.ts`                 | 2         | `ast-sha256:a8f5f167...` | `AST_REFACTOR`     | 2026-02-19 09:10 UTC |
| `src/api/weather.ts`                    | 2         | `ast-sha256:d2e3f4a5...` | `AST_REFACTOR`     | 2026-02-19 08:45 UTC |
| `src/types/weather.ts`                  | 1         | `ast-sha256:c1d2e3f4...` | `INTENT_EVOLUTION` | 2026-02-19 08:30 UTC |
| `src/weather/service.ts`                | 1         | `ast-sha256:e3f4a5b6...` | `INTENT_EVOLUTION` | 2026-02-19 09:00 UTC |
| `src/routes/weather.ts`                 | 1         | `ast-sha256:f4a5b6c7...` | `INTENT_EVOLUTION` | 2026-02-19 09:30 UTC |
| `tests/weather/weather.service.test.ts` | 1         | `ast-sha256:a5b6c7d8...` | `INTENT_EVOLUTION` | 2026-02-19 09:45 UTC |

### Mutation Timeline

```
2026-02-19 08:00  src/weather/parser.ts          AST_REFACTOR    (internal refactor)
2026-02-19 08:15  src/api/weather.ts              INTENT_EVOLUTION (+fn:buildWeatherUrl:2)
2026-02-19 08:30  src/types/weather.ts            INTENT_EVOLUTION (+interface:WeatherResponse, +interface:WeatherError)
2026-02-19 08:45  src/api/weather.ts              AST_REFACTOR    (extracted rate-limiter helper)
2026-02-19 09:00  src/weather/service.ts          INTENT_EVOLUTION (+fn:getWeather:1, +fn:getWeatherByCoords:2, +fn:clearCache:0)
2026-02-19 09:10  src/weather/parser.ts           AST_REFACTOR    (added JSDoc comments)
2026-02-19 09:30  src/routes/weather.ts           INTENT_EVOLUTION (+fn:createWeatherRoute:1)
2026-02-19 09:45  tests/weather/weather.service.test.ts  INTENT_EVOLUTION (new test file)
```

### Acceptance Criteria Progress

| Criterion                                            | Status                          |
| ---------------------------------------------------- | ------------------------------- |
| GET /weather?city=London returns correct JSON shape  | â¬œ Not verified                 |
| GET /weather?city=InvalidCity returns 404            | â¬œ Not verified                 |
| Unit tests pass with >90% coverage                   | â¬œ Not verified                 |
| TypeScript strict mode passes                        | â¬œ Not verified                 |
| WeatherResponse and WeatherError interfaces exported | âœ… Done (INT-001 trace entry 3) |
| Rate limiting returns 429 on threshold exceeded      | â¬œ Not verified                 |

---

## INT-002 â€” JWT Authentication Middleware

**Status:** âšª `PENDING`
**Owned Scope:** `src/auth/**`, `src/middleware/jwt.ts`, `src/middleware/authGuard.ts`, `src/types/auth.ts`, `tests/auth/**`
**Contributors:** None yet

### Files Modified

_No files modified yet. Agent must call `select_active_intent("INT-002")` to begin work._

---

## INT-003 â€” Hook System â€” Core Engine

**Status:** ðŸŸ¡ `IN_PROGRESS`
**Owned Scope:** `src/hooks/**`, `tests/hooks/**`, `.orchestration/**`, `CLAUDE.md`, `.intentignore`
**Contributors:** `claude-sonnet-4-6` (session `sess-abc-002`)

### Files Modified

| File                                   | Mutations | Last Hash                | Last Class         | Last Modified        |
| -------------------------------------- | --------- | ------------------------ | ------------------ | -------------------- |
| `src/hooks/HookEngine.ts`              | 1         | `ast-sha256:b6c7d8e9...` | `INTENT_EVOLUTION` | 2026-02-19 10:00 UTC |
| `src/hooks/pre/ContextInjector.ts`     | 1         | `ast-sha256:c7d8e9f0...` | `INTENT_EVOLUTION` | 2026-02-19 10:05 UTC |
| `src/hooks/pre/IntentGatekeeper.ts`    | 1         | `ast-sha256:d8e9f0a1...` | `INTENT_EVOLUTION` | 2026-02-19 10:10 UTC |
| `src/hooks/pre/ScopeEnforcer.ts`       | 1         | `ast-sha256:e9f0a1b2...` | `INTENT_EVOLUTION` | 2026-02-19 10:15 UTC |
| `src/hooks/pre/OptimisticLockGuard.ts` | 1         | `ast-sha256:f0a1b2c3...` | `INTENT_EVOLUTION` | 2026-02-19 10:20 UTC |
| `src/hooks/post/TraceLogger.ts`        | 1         | `ast-sha256:a1b2c3d4...` | `INTENT_EVOLUTION` | 2026-02-19 10:25 UTC |

### Mutation Timeline

```
2026-02-19 10:00  src/hooks/HookEngine.ts              INTENT_EVOLUTION (core engine created)
2026-02-19 10:05  src/hooks/pre/ContextInjector.ts     INTENT_EVOLUTION (pre-hook created)
2026-02-19 10:10  src/hooks/pre/IntentGatekeeper.ts    INTENT_EVOLUTION (pre-hook created)
2026-02-19 10:15  src/hooks/pre/ScopeEnforcer.ts       INTENT_EVOLUTION (pre-hook created)
2026-02-19 10:20  src/hooks/pre/OptimisticLockGuard.ts INTENT_EVOLUTION (pre-hook created)
2026-02-19 10:25  src/hooks/post/TraceLogger.ts        INTENT_EVOLUTION (post-hook created)
```

### Acceptance Criteria Progress

| Criterion                                                 | Status          |
| --------------------------------------------------------- | --------------- |
| All 4 pre-hooks pass unit tests with 100% branch coverage | â¬œ Not verified |
| All 3 post-hooks pass unit tests                          | â¬œ Not verified |
| HookEngine short-circuits on first BlockSignal            | â¬œ Not verified |
| Post-hook failure does not propagate                      | â¬œ Not verified |
| select_active_intent returns valid XML                    | â¬œ Not verified |
| agent_trace.jsonl entries pass JSON schema validation     | â¬œ Not verified |
| AST hash is deterministic                                 | â¬œ Not verified |

---

## INT-004 â€” Database Layer â€” User Model

**Status:** ðŸ”´ `BLOCKED`
**Blocked Reason:** Waiting for `INT-002` (JWT Auth) to be `COMPLETE` before user session schema can be finalised.
**Depends On:** `INT-002`
**Contributors:** None yet

### Files Modified

_No files modified yet. Blocked on INT-002._

---

## How to Query This File

### Find all files touched by a specific intent

```bash
cat .orchestration/agent_trace.jsonl | \
  jq '. | select(.files[].conversations[].related[].value == "INT-001") | .files[].relative_path' | \
  sort -u
```

### Find all INTENT_EVOLUTION events

```bash
cat .orchestration/agent_trace.jsonl | \
  jq '. | select(.mutation_class == "INTENT_EVOLUTION") | {file: .files[].relative_path, intent: .files[].conversations[].related[].value, time: .timestamp}'
```

### Verify a file's content hash matches the trace

```bash
# Compute current AST hash of a file
node -e "
const { hashCodeBlock } = require('./src/hooks/utils/astHasher');
hashCodeBlock(require('fs').readFileSync('src/weather/parser.ts','utf8'), 'src/weather/parser.ts')
  .then(r => console.log(r.hash));
"

# Compare to the trace entry
cat .orchestration/agent_trace.jsonl | \
  jq '. | select(.files[].relative_path == "src/weather/parser.ts") | .files[].conversations[].ranges[].content_hash' | \
  tail -1
```

---

<!--DATA:[{"intentId":"INT-001","intentName":"Build Weather API Endpoint","status":"IN_PROGRESS","files":["src/weather/parser.ts","src/api/weather.ts","src/types/weather.ts","src/weather/service.ts","src/routes/weather.ts","tests/weather/weather.service.test.ts"],"lastUpdated":"2026-02-19T09:45:00Z","mutationCount":8},{"intentId":"INT-002","intentName":"JWT Authentication Middleware","status":"PENDING","files":[],"lastUpdated":"2026-02-18T00:00:00Z","mutationCount":0},{"intentId":"INT-003","intentName":"Hook System â€” Core Engine","status":"IN_PROGRESS","files":["src/hooks/HookEngine.ts","src/hooks/pre/ContextInjector.ts","src/hooks/pre/IntentGatekeeper.ts","src/hooks/pre/ScopeEnforcer.ts","src/hooks/pre/OptimisticLockGuard.ts","src/hooks/post/TraceLogger.ts"],"lastUpdated":"2026-02-19T10:25:00Z","mutationCount":6},{"intentId":"INT-004","intentName":"Database Layer â€” User Model","status":"BLOCKED","files":[],"lastUpdated":"2026-02-18T00:00:00Z","mutationCount":0}]-->
